<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS-Cart Header</title>
    <link rel="stylesheet" type="text/css" href="styles/header_style.css">
</head>

<body>
    <header>
        <div class="logo">
            <img id="business-logo" src="https://st2.depositphotos.com/4035913/6124/i/950/depositphotos_61243733-stock-illustration-business-company-logo.jpg" alt="Business Logo">
        </div>
        <div class="business-info">
            <p>1031 My Road, Goodtown, Place, 99939</p>
        </div>
        <nav>
            
            <a href="CustomerHomepage.html" class="nav-button" target="_top">Home</a>
            <span id="login" style="display: inline-block;">
                <a href="LoginPage.html" class="nav-button" target="_top">Login</a>
            </span>
            <span id="cart-button" style="display: none;">
                <a href="CustomerCart.html" class="nav-button" target="_top">
                <img src="https://www.freeiconspng.com/thumbs/cart-icon/basket-cart-icon-27.png" alt="Cart">
                </a>
            </span>
            <span id="employee-order-status" style="display: none;">
                <a href="EmployeeOrderStatusPage.html" class="nav-button" target="_top">Customer Orders</a>
            </span>
            <span id="customer-order-status" style="display: none;">
                <a href="CustomerOrderStatusPage.html" class="nav-button" target="_top">Order Status</a>
            </span>
            <span id="Customize Categories" style="display:none;">
                <a href="" class ="nav-button" target="_top"></a>
            </span>
            <span id="" style="display:none;">
                <a href="" class ="nav-button" target="_top"></a>
            </span>
            <span id="logout-button" style="display:none;">
                <a id="logout-link" href="#" class="nav-button" onclick="logout()">Logout</a>
            </span>
        </nav>
    </header>

    <script>
        window.onload = async () => {
            try {
                const response = await fetch("http://127.0.0.1:5000/getBusinessHeaderInformation", {
                    method: "GET"
                });

                if (!response.ok) {
                    throw new Error("Failed to fetch business header info");
                }
                const data = await response.json();
                console.log("Received business header data:", data);

                // Update the logo image
                document.getElementById("business-logo").src = data.logoURL;

                // Update the address paragraph inside .business-info
                const addressElement = document.querySelector(".business-info p");
                if (addressElement) {
                    addressElement.innerText = data.address; // Set the new address
                }

                // Update the business name
                //document.getElementById("business-name").innerText = data.businessName;
            } catch (error) {
                console.error("Error fetching header info:", error);
            }
        };
        
        async function logout() {
            try {
                const response = await fetch("http://127.0.0.1:5000/logout", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    }
                });

                if (response.ok) {
                    
                    window.top.location.href = "LoginPage.html"; 
                } else {
                    alert("Logout failed. Please try again.");
                }
            } catch (error) {
                console.error("Error during logout:", error);
                alert("Logout failed. Please try again.");
            }
        }

    </script>

</body>
</html>
